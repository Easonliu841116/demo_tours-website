webpackJsonp([1],{"+15Z":function(t,e){},"3Dsf":function(t,e){},IzWn:function(t,e){},"MZT/":function(t,e){},N3nT:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),i=a("7t+N"),o=a.n(i),r=(a("K3J8"),a("mtWM")),n=a.n(r),c=a("Rf8U"),l=a.n(c),d=a("sUu7"),u=a("TXmL"),p=a("1SbN"),v=a.n(p),m=a("ZZvs"),_=a.n(m),h=(a("SYh3"),{name:"Navbar",data:function(){return{messages:[]}},methods:{updateMessage:function(t,e){var a=Math.floor(new Date/1e3);this.messages.push({message:t,status:e,timestamp:a}),this.removeMessageWithTiming(a)},removeMessage:function(t){this.messages.splice(t,1)},removeMessageWithTiming:function(t){var e=this;setTimeout(function(){e.messages.forEach(function(a,s){a.timestamp===t&&e.messages.splice(s,1)})},5e3)}},created:function(){var t=this;t.$bus.$on("alert",function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"danger";t.updateMessage(e,a)})}}),f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message-alert"},t._l(t.messages,function(e,s){return a("div",{key:s,staticClass:"alert alert-dismissible text-dark font-weight-bold",class:"alert-"+e.status},[t._v("\n    "+t._s(e.message)+"\n    "),a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.removeMessage(s)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}),0)},staticRenderFns:[]};var g={name:"App",components:{AlertMessage:a("VU/8")(h,f,!1,function(t){a("O3Lm")},"data-v-f3c4bf20",null).exports}},C={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("AlertMessage"),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var b=a("VU/8")(g,C,!1,function(t){a("N3nT")},null,null).exports,x=a("/ocq"),y={data:function(){return{isLoading:!1}},methods:{signOut:function(){var t=this;t.isLoading=!0,t.$http.post("https://vue-course-api.hexschool.io/logout").then(function(){t.$bus.$emit("alert","登出成功！","success"),setTimeout(function(){t.$router.push("./register"),t.isLoading=!1},750)})},goIndex:function(){setTimeout(function(){window.open("./")},250)}}},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),t._v(" "),a("div",{staticClass:"container"},[a("nav",{staticClass:"navbar navbar-dark fixed-top bg-dark"},[a("h4",{staticClass:" text-white font-weight-bold mb-0",attrs:{href:"#"},on:{click:function(t){t.preventDefault()}}},[t._v("後臺管理介面")]),t._v(" "),a("ul",{staticClass:"navbar-nav"},[a("li",{staticClass:"nav-item d-flex"},[a("a",{staticClass:"nav-link mr-4",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.goIndex(e)}}},[t._v("回到首頁")]),t._v(" "),a("a",{staticClass:"nav-link mr-4",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.signOut(e)}}},[t._v("登出")])])])])])],1)},staticRenderFns:[]};var D={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("nav",{staticClass:"col-md-2 d-none d-md-block bg-light sidebar"},[e("div",{staticClass:"sidebar-sticky"},[e("ul",{staticClass:"nav flex-column mt-4 ml-4"},[e("li",{staticClass:"nav-item mt-1"},[e("router-link",{staticClass:"nav-link",attrs:{to:"products"}},[e("b",{staticClass:"font-dark text-hover",attrs:{"data-feather":"Products"}},[e("i",{staticClass:"fas fa-box-open"}),this._v("\n              商品列表\n            ")])])],1),this._v(" "),e("li",{staticClass:"nav-item mt-1"},[e("router-link",{staticClass:"nav-link",attrs:{to:"orderlist"}},[e("b",{staticClass:"font-dark text-hover",attrs:{"data-feather":"OrderList"}},[e("i",{staticClass:"far fa-list-alt"}),this._v("\n              訂單列表\n            ")])])],1),this._v(" "),e("li",{staticClass:"nav-item mt-1"},[e("router-link",{staticClass:"nav-link",attrs:{to:"coupon"}},[e("b",{staticClass:"font-dark text-hover",attrs:{"data-feather":"Coupon"}},[e("i",{staticClass:"fas fa-ticket-alt"}),this._v("\n              優惠券列表\n            ")])])],1)])])])])},staticRenderFns:[]};var P={components:{Navbar:a("VU/8")(y,w,!1,function(t){a("y/Rz")},"data-v-3b097f88",null).exports,Sidebar:a("VU/8")(null,D,!1,function(t){a("bSfg")},"data-v-a27bc4cc",null).exports}},$={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"container-fluid"},[e("Navbar"),this._v(" "),e("Sidebar"),this._v(" "),e("div",{staticClass:"row"},[e("main",{staticClass:"col-md-9 ml-sm-auto col-lg-10 px-4",attrs:{role:"main"}},[e("router-view")],1)])],1)])},staticRenderFns:[]};var k=a("VU/8")(P,$,!1,function(t){a("MZT/")},null,null).exports,L=a("Dd8w"),N=a.n(L),E={data:function(){return{isFileLoading:!1}},props:{tempProductData:{type:Object,default:function(){return{}}},isNewData:{type:Boolean,default:function(){return!1}}},methods:{emitGetProducts:function(){this.$emit("emitGetProducts")},updateProduct:function(){var t=this,e="post",a="https://vue-course-api.hexschool.io/api/eason1116/admin/product";t.isNewData||(a="https://vue-course-api.hexschool.io/api/eason1116/admin/product/"+t.tempProductData.id,e="put"),t.$http[e](a,{data:t.tempProductData}).then(function(e){e.data.success?(o()("#EditProductModal").modal("hide"),t.emitGetProducts(),t.$bus.$emit("alert","上傳完成","success")):(o()("#EditProductModal").modal("hide"),t.emitGetProducts(),t.$bus.$emit("alert","上傳失敗，請稍後在試","danger"))})},uploadFile:function(){var t=this,e=t.$refs.files.files[0],a=new FormData;a.append("file-to-upload",e);t.isFileLoading=!0,t.$http.post("https://vue-course-api.hexschool.io/api/eason1116/admin/upload",a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){e.data.success?t.$set(t.tempProductData,"imageUrl",e.data.imageUrl):t.$bus.$emit("alert","Error: 檔案過大或格式有誤","danger"),t.isFileLoading=!1})}}},M={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"modal fade",attrs:{id:"EditProductModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[t._m(0),t._v(" "),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"image"}},[t._v("輸入圖片網址")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProductData.imageUrl,expression:"tempProductData.imageUrl"}],staticClass:"form-control",attrs:{type:"text",id:"image",placeholder:"請輸入圖片連結"},domProps:{value:t.tempProductData.imageUrl},on:{input:function(e){e.target.composing||t.$set(t.tempProductData,"imageUrl",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"customFile"}},[t._v("\n                  或 上傳圖片\n                  "),t.isFileLoading?a("i",{staticClass:"fas fa-spinner fa-spin"}):t._e()]),t._v(" "),a("input",{ref:"files",staticClass:"form-control",attrs:{type:"file",id:"customFile"},on:{change:t.uploadFile}})]),t._v(" "),a("img",{staticClass:"img-fluid",attrs:{img:"https://images.unsplash.com/photo-1483985988355-763728e1935b?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=828346ed697837ce808cae68d3ddc3cf&auto=format&fit=crop&w=1350&q=80",src:t.tempProductData.imageUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"col-sm-8"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[t._v("標題")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProductData.title,expression:"tempProductData.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"請輸入標題"},domProps:{value:t.tempProductData.title},on:{input:function(e){e.target.composing||t.$set(t.tempProductData,"title",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"category"}},[t._v("分類")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProductData.category,expression:"tempProductData.category"}],staticClass:"form-control",attrs:{type:"text",id:"category",placeholder:"請輸入分類"},domProps:{value:t.tempProductData.category},on:{input:function(e){e.target.composing||t.$set(t.tempProductData,"category",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"price"}},[t._v("單位")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProductData.unit,expression:"tempProductData.unit"}],staticClass:"form-control",attrs:{type:"unit",id:"unit",placeholder:"請輸入單位"},domProps:{value:t.tempProductData.unit},on:{input:function(e){e.target.composing||t.$set(t.tempProductData,"unit",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"origin_price"}},[t._v("原價")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProductData.origin_price,expression:"tempProductData.origin_price"}],staticClass:"form-control",attrs:{type:"number",id:"origin_price",placeholder:"請輸入原價"},domProps:{value:t.tempProductData.origin_price},on:{input:function(e){e.target.composing||t.$set(t.tempProductData,"origin_price",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"price"}},[t._v("售價")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProductData.price,expression:"tempProductData.price"}],staticClass:"form-control",attrs:{type:"number",id:"price",placeholder:"請輸入售價"},domProps:{value:t.tempProductData.price},on:{input:function(e){e.target.composing||t.$set(t.tempProductData,"price",e.target.value)}}})])]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"description"}},[t._v("商品描述")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProductData.description,expression:"tempProductData.description"}],staticClass:"form-control",attrs:{type:"text",id:"description",placeholder:"請輸入商品描述"},domProps:{value:t.tempProductData.description},on:{input:function(e){e.target.composing||t.$set(t.tempProductData,"description",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"content"}},[t._v("說明內容")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProductData.content,expression:"tempProductData.content"}],staticClass:"form-control",attrs:{type:"text",id:"content",placeholder:"請輸入商品說明內容"},domProps:{value:t.tempProductData.content},on:{input:function(e){e.target.composing||t.$set(t.tempProductData,"content",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProductData.is_enabled,expression:"tempProductData.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"is_enabled","true-value":1,"false-value":0},domProps:{checked:Array.isArray(t.tempProductData.is_enabled)?t._i(t.tempProductData.is_enabled,null)>-1:t._q(t.tempProductData.is_enabled,1)},on:{change:function(e){var a=t.tempProductData.is_enabled,s=e.target,i=s.checked?1:0;if(Array.isArray(a)){var o=t._i(a,null);s.checked?o<0&&t.$set(t.tempProductData,"is_enabled",a.concat([null])):o>-1&&t.$set(t.tempProductData,"is_enabled",a.slice(0,o).concat(a.slice(o+1)))}else t.$set(t.tempProductData,"is_enabled",i)}}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v("是否啟用")])])])])])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.updateProduct(e)}}},[t._v("確認")])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header bg-dark text-white"},[e("h5",{staticClass:"modal-title text-white",attrs:{id:"exampleModalLabel"}},[e("span",[this._v("新增 / 修改商品")])]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{staticClass:"text-white",attrs:{"aria-hidden":"true"}},[this._v("×")])])])}]},F=a("VU/8")(E,M,!1,null,null,null).exports,T={props:{tempProductData:{type:Object,default:function(){return{}}}},methods:{removeProduct:function(){var t=this,e="https://vue-course-api.hexschool.io/api/eason1116/admin/product/"+t.tempProductData.id;t.$http.delete(e).then(function(e){e.data.success?(t.emitGetProducts(),o()("#delProductModal").modal("hide"),t.$bus.$emit("alert","刪除完成","success")):(t.emitGetProducts(),o()("#delProductModal").modal("hide"),t.$bus.$emit("alert","上傳失敗，請稍後在試","danger"))})},emitGetProducts:function(){this.$emit("emitGetProducts")}}},S={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"modal fade",attrs:{id:"delProductModal",tabindex:"-1",role:"dialog","aria-labelledby":"DelModalLable","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[t._m(0),t._v(" "),a("div",{staticClass:"modal-body"},[t._v("\n          是否刪除\n          "),a("strong",{staticClass:"text-danger"},[t._v(t._s(t.tempProductData.title))]),t._v(" 商品(刪除後將無法恢復)。\n        ")]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.removeProduct(e)}}},[t._v("確認刪除")])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header bg-danger"},[e("h5",{staticClass:"modal-title text-white",attrs:{id:"DelModalLable"}},[e("span",[this._v("刪除產品")])]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{staticClass:"text-white",attrs:{"aria-hidden":"true"}},[this._v("×")])])])}]},q=a("VU/8")(T,S,!1,null,null,null).exports,O={props:{pageData:{type:Object,default:function(){return{}}}},methods:{emitGetPage:function(t){this.$emit("emitGetPage",t)}}},U={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{attrs:{"aria-label":"Page navigation example"}},[a("ul",{staticClass:"pagination"},[a("li",{staticClass:"page-item",class:{disabled:!t.pageData.has_pre}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){return e.preventDefault(),t.emitGetPage(t.pageData.current_page-1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._v(" "),t._l(t.pageData.total_pages,function(e,s){return a("li",{key:s,staticClass:"page-item"},[a("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.emitGetPage(e)}}},[t._v(t._s(e))])])}),t._v(" "),a("li",{staticClass:"page-item",class:{disabled:!t.pageData.has_next}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(e){return e.preventDefault(),t.emitGetPage(t.pageData.current_page+1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])])},staticRenderFns:[]},A=a("VU/8")(O,U,!1,null,null,null).exports,V={data:function(){return{products:{},tempProducts:{},isNew:!1,isLoading:!1,pages:{}}},methods:{showEditModal:function(t,e){t?(this.tempProducts={},this.isNew=!0,o()("#EditProductModal").modal("show")):(this.tempProducts=N()({},e),this.isNew=!1,o()("#EditProductModal").modal("show"))},showDelModal:function(t){this.tempProducts=N()({},t),o()("#delProductModal").modal("show")},getProducts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this;e.isLoading=!0;var a="https://vue-course-api.hexschool.io/api/eason1116/admin/products?page="+t;e.$http.get(a).then(function(t){e.isLoading=!1,e.products=t.data.products,e.pages=t.data.pagination})}},created:function(){this.getProducts()},components:{EditProductModal:F,DelProductModal:q,Pagination:A}},I={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),t._v(" "),a("div",{staticClass:"text-right mt-4"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.preventDefault(),t.showEditModal(!0)}}},[t._v("建立商品")])]),t._v(" "),a("table",{staticClass:"table mt-4"},[t._m(0),t._v(" "),a("tbody",t._l(t.products,function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.category))]),t._v(" "),a("td",[t._v(t._s(e.title))]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("CurrencyFilter")(e.origin_price)))]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("CurrencyFilter")(e.price)))]),t._v(" "),a("td",[e.is_enabled?a("span",{staticClass:"text-success"},[t._v("啟用")]):a("span",[t._v("未啟用")])]),t._v(" "),a("td",[a("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(a){return t.showEditModal(!1,e)}}},[t._v("編輯")])]),t._v(" "),a("td",[a("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(a){return t.showDelModal(e)}}},[t._v("刪除")])])])}),0)]),t._v(" "),a("EditProductModal",{attrs:{tempProductData:t.tempProducts,isNewData:t.isNew},on:{emitGetProducts:t.getProducts}}),t._v(" "),a("DelProductModal",{attrs:{tempProductData:t.tempProducts},on:{emitGetProducts:t.getProducts}}),t._v(" "),a("Pagination",{attrs:{pageData:t.pages},on:{emitGetPage:t.getProducts}})],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{width:"15%"}},[t._v("分類")]),t._v(" "),a("th",[t._v("商品名稱")]),t._v(" "),a("th",{attrs:{width:"12.5%"}},[t._v("原價")]),t._v(" "),a("th",{attrs:{width:"12.5%"}},[t._v("售價")]),t._v(" "),a("th",{attrs:{width:"10%"}},[t._v("是否啟用")]),t._v(" "),a("th",{attrs:{width:"10%"}},[t._v("編輯")]),t._v(" "),a("th",{attrs:{width:"10%"}},[t._v("刪除")])])])}]},R=a("VU/8")(V,I,!1,null,null,null).exports,G={data:function(){return{isLoading:!1,pages:{},isSort:!1,orders:{}}},methods:{getOrders:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this;e.isLoading=!0;var a="https://vue-course-api.hexschool.io/api/eason1116/admin/orders?page="+t;e.$http.get(a).then(function(t){e.orders=t.data.orders,e.pages=t.data.pagination}),e.isLoading=!1},sortOrderByPaid:function(){var t=this;t.isSort=!t.isSort,t.orders.length&&(t.isSort?t.orders.sort(function(t,e){return(t.is_paid?1:-1)-(e.is_paid?1:-1)}):t.orders.sort(function(t,e){var a=t.is_paid?1:-1;return(e.is_paid?1:-1)-a}))}},created:function(){this.getOrders()},components:{Pagination:A}},j={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),t._v(" "),a("table",{staticClass:"table mt-4"},[a("thead",[a("tr",[a("th",[t._v("購買時間")]),t._v(" "),a("th",[t._v("Email")]),t._v(" "),a("th",[t._v("購買款項")]),t._v(" "),a("th",[t._v("應付金額")]),t._v(" "),a("th",[a("span",[t._v("是否付款")]),t._v(" "),a("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.sortOrderByPaid(e)}}},[a("i",{staticClass:"fas fa-caret-down text-dark",class:{isSort:t.isSort}})])])])]),t._v(" "),a("tbody",t._l(t.orders,function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(t._f("DateFilter")(e.create_at)))]),t._v(" "),e.user?a("td",[t._v(t._s(e.user.email))]):t._e(),t._v(" "),a("td",t._l(e.products,function(e,s){return a("ul",{key:s,staticClass:"list-unstyled"},[a("li",[a("span",[t._v(t._s(e.product.title))]),t._v("：\n              "),a("span",[t._v(t._s(e.qty))]),t._v(" "),a("span",[t._v(t._s(e.product.unit))])])])}),0),t._v(" "),a("td",[t._v(t._s(t._f("currencyFilter")(e.total)))]),t._v(" "),a("td",[e.is_paid?a("strong",{staticClass:"text-success"},[t._v("已付款")]):a("b",{staticClass:"text-muted"},[t._v("尚未付款")])])])}),0)]),t._v(" "),a("Pagination",{attrs:{pageData:t.pages},on:{emitGetPage:t.getOrders}})],1)},staticRenderFns:[]};var z=a("VU/8")(G,j,!1,function(t){a("+15Z")},"data-v-bdeaacb2",null).exports,W={data:function(){return{coupons:{},tempCoupon:{},due_date:new Date,isNew:!1,pages:{},isLoading:!1}},watch:{due_date:function(){var t=Math.floor(new Date(this.due_date)/1e3);this.tempCoupon.due_date=t}},methods:{openEditCouponModal:function(t,e){var a=this;if(o()("#couponModal").modal("show"),a.isNew=t,a.isNew)a.tempCoupon={};else{a.tempCoupon=N()({},e);var s=new Date(1e3*a.tempCoupon.due_date).toISOString().split("T");a.due_date=s[0]}},getCoupons:function(){var t=this;t.isLoading=!0,this.$http.get("https://vue-course-api.hexschool.io/api/eason1116/admin/coupons",t.tempProduct).then(function(e){t.pages=e.data.pagination,t.coupons=e.data.coupons,t.isLoading=!1})},updateCoupon:function(){var t=this,e=this;if(e.isNew){this.$http.post("https://vue-course-api.hexschool.io/api/eason1116/admin/coupon",{data:e.tempCoupon}).then(function(){o()("#couponModal").modal("hide"),t.getCoupons()})}else{var a="https://vue-course-api.hexschool.io/api/eason1116/admin/coupon/"+e.tempCoupon.id;e.due_date=new Date(1e3*e.tempCoupon.due_date),this.$http.put(a,{data:e.tempCoupon}).then(function(){o()("#couponModal").modal("hide"),t.getCoupons()})}},openDelCouponModal:function(t){this.tempCoupon=N()({},t),o()("#delCouponModal").modal("show")},removeCoupon:function(){var t=this,e="https://vue-course-api.hexschool.io/api/eason1116/admin/coupon/"+t.tempCoupon.id;t.$http.delete(e).then(function(e){e.data.success?(t.getCoupons(),o()("#delCouponModal").modal("hide"),t.$bus.$emit("alert","刪除完成","success")):(t.getCoupons(),o()("#delCouponModal").modal("hide"),t.$bus.$emit("alert","上傳失敗，請稍後在試","danger"))})}},created:function(){this.getCoupons()},components:{Pagination:A}},J={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),t._v(" "),a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-primary mt-4",on:{click:function(e){return t.openEditCouponModal(!0)}}},[t._v("\n      建立優惠券\n    ")])]),t._v(" "),a("table",{staticClass:"table mt-4"},[t._m(0),t._v(" "),a("tbody",t._l(t.coupons,function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(e.title))]),t._v(" "),a("td",[t._v(t._s(e.percent)+"%")]),t._v(" "),a("td",[t._v(t._s(t._f("DateFilter")(e.due_date)))]),t._v(" "),a("td",[1===e.is_enabled?a("span",{staticClass:"text-success"},[t._v("啟用")]):a("span",{staticClass:"text-muted"},[t._v("未起用")])]),t._v(" "),a("td",[a("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(a){return t.openEditCouponModal(!1,e)}}},[t._v("編輯")])]),t._v(" "),a("td",[a("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(a){return t.openDelCouponModal(e)}}},[t._v("刪除")])])])}),0)]),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"couponModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[t._m(1),t._v(" "),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[t._v("標題")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.title,expression:"tempCoupon.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"請輸入標題"},domProps:{value:t.tempCoupon.title},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"title",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"coupon_code"}},[t._v("優惠碼")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.code,expression:"tempCoupon.code"}],staticClass:"form-control",attrs:{type:"text",id:"coupon_code",placeholder:"請輸入優惠碼"},domProps:{value:t.tempCoupon.code},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"code",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"due_date"}},[t._v("到期日")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.due_date,expression:"due_date"}],staticClass:"form-control",attrs:{type:"date",id:"due_date"},domProps:{value:t.due_date},on:{input:function(e){e.target.composing||(t.due_date=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"price"}},[t._v("折扣百分比")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.percent,expression:"tempCoupon.percent"}],staticClass:"form-control",attrs:{type:"number",id:"price",placeholder:"請輸入折扣百分比"},domProps:{value:t.tempCoupon.percent},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"percent",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.is_enabled,expression:"tempCoupon.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox","true-value":1,"false-value":0,id:"is_enabled"},domProps:{checked:Array.isArray(t.tempCoupon.is_enabled)?t._i(t.tempCoupon.is_enabled,null)>-1:t._q(t.tempCoupon.is_enabled,1)},on:{change:function(e){var a=t.tempCoupon.is_enabled,s=e.target,i=s.checked?1:0;if(Array.isArray(a)){var o=t._i(a,null);s.checked?o<0&&t.$set(t.tempCoupon,"is_enabled",a.concat([null])):o>-1&&t.$set(t.tempCoupon,"is_enabled",a.slice(0,o).concat(a.slice(o+1)))}else t.$set(t.tempCoupon,"is_enabled",i)}}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v("\n                是否啟用\n              ")])])])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateCoupon}},[t._v("完成")])])])])]),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"delCouponModal",tabindex:"-1",role:"dialog","aria-labelledby":"DelModalLable","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[t._m(2),t._v(" "),a("div",{staticClass:"modal-body"},[t._v("\n          是否刪除\n          "),a("strong",{staticClass:"text-danger"},[t._v(t._s(t.tempCoupon.title))]),t._v(" 優惠券(刪除後將無法恢復)。\n        ")]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.removeCoupon(e)}}},[t._v("確認刪除")])])])])]),t._v(" "),a("Pagination",{attrs:{pageData:t.pages},on:{emitGetPage:t.getCoupons}})],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("名稱")]),t._v(" "),a("th",[t._v("折扣百分比")]),t._v(" "),a("th",[t._v("到期日")]),t._v(" "),a("th",[t._v("是否啟用")]),t._v(" "),a("th",[t._v("編輯")]),t._v(" "),a("th",[t._v("刪除")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header bg-dark"},[e("h5",{staticClass:"modal-title text-white",attrs:{id:"exampleModalLabel"}},[this._v("新增 / 修改優惠券")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{staticClass:"text-white",attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header bg-danger"},[e("h5",{staticClass:"modal-title text-white",attrs:{id:"DelModalLable"}},[e("span",[this._v("刪除優惠券")])]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{staticClass:"text-white",attrs:{"aria-hidden":"true"}},[this._v("×")])])])}]},B=a("VU/8")(W,J,!1,null,null,null).exports,Z={props:{navItemShowJudge:{type:String,default:function(){return""}}},data:function(){return{carts:{},cartLength:0,isLoading:!1}},methods:{toPage:function(t){var e=this,a="";a="index"===t?"/":"tours"===t?"/tours":"checkout"===t?"/checkout":"register",e.isLoading=!0,setTimeout(function(){e.$router.push(a),e.isLoading=!1},750)},getCart:function(){var t=this;t.$http.get("https://vue-course-api.hexschool.io/api/eason1116/cart").then(function(e){t.carts=e.data.data,t.cartLength=e.data.data.carts.length})}},created:function(){this.getCart(),o()(window).scroll(function(){o()(document).scrollTop()>50?(o()("#navbar").removeClass("transparent"),o()("#navbar").addClass("bg-dark")):(o()("#navbar").addClass("transparent"),o()("#navbar").removeClass("bg-dark"))})}},H={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),t._v(" "),a("nav",{staticClass:"navbar navbar-expand-lg transparent fixed-top",attrs:{id:"navbar"}},[a("div",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link c-nav-link text-white h3 font-weight-bolder rounded ml-2 mb-0",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.toPage("index")}}},[t._v("伊森旅遊")])]),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[a("ul",{staticClass:"navbar-nav mr-auto ml-3"},[a("li",{staticClass:"nav-item ml-2 py-2"},[a("a",{staticClass:"nav-link c-nav-link text-white h6 rounded mb-0",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.toPage("tours")}}},[a("i",{staticClass:"fas fa-plane"}),t._v(" "),a("span",{staticClass:"font-weight-bold"},[t._v(" 行程一覽")])])]),t._v(" "),"tours"===t.navItemShowJudge?a("li",{staticClass:"nav-item ml-2 py-2"},[a("a",{staticClass:"nav-link c-nav-link text-white h6 rounded mb-0",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.toPage("checkout")}}},[a("div",[a("i",{staticClass:"fas fa-shopping-cart"}),t._v(" 購物車\n              "),t.cartLength>=1?a("small",{staticClass:"bg-danger rounded-circle text-white\n              c-cart-qty d-inline-block text-center"},[t._v("\n                "+t._s(t.cartLength)+"\n              ")]):t._e()])])]):t._e()]),t._v(" "),"register"!==t.navItemShowJudge?a("div",{staticClass:"nav-item ml-2 py-2"},[a("a",{staticClass:"nav-link c-nav-link text-white h6 rounded mb-0",attrs:{href:"#",tabindex:"-1","aria-disabled":"true"},on:{click:function(e){return e.preventDefault(),t.toPage("register")}}},[a("i",{staticClass:"fas fa-cog"}),t._v(" "),a("span",{staticClass:"font-weight-bold"},[t._v(" 登入後台")])])]):t._e()])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"navbar-toggler h3",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[e("i",{staticClass:"fas fa-bars text-white"})])}]};var X=a("VU/8")(Z,H,!1,function(t){a("yXcC")},"data-v-5d5e4201",null).exports,Y={data:function(){return{isLoading:!1}},methods:{toTours:function(){var t=this;t.isLoading=!0,setTimeout(function(){window.location.href="./#/tours",t.isLoading=!1},750)}},components:{Navbar:X}},K={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),t._v(" "),s("Navbar"),t._v(" "),s("div",{staticClass:"c-fullscreen-bg"},[t._m(0),t._v(" "),s("video",{staticClass:"c-fullscreen-bg__video",attrs:{loop:"",muted:"",autoplay:""},domProps:{muted:!0}},[s("source",{attrs:{src:a("VAVp"),type:"video/mp4"}})]),t._v(" "),s("button",{staticClass:"btn btn-lg btn-outline-light transparent font-weight-bold\n    c-btn-enter",on:{click:t.toTours}},[t._v("進入網站")])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{staticClass:"c-slogan c-font-weight-bolder font-italic"},[this._v("\n        享受，\n      "),e("br"),this._v("\n        每個精彩時刻。\n    ")])}]};var Q=a("VU/8")(Y,K,!1,function(t){a("3Dsf")},"data-v-3ff513cc",null).exports,tt={data:function(){return{user:{username:"",password:""},isLoading:!1,isDeviceError:!1}},methods:{signIn:function(){var t=this;t.isLoading=!0,t.$http.post("https://vue-course-api.hexschool.io/admin/signin",t.user).then(function(e){if(window.screen.width<992)return t.isDeviceError=!0,void(t.isLoading=!1);e.data.success?t.$router.push("/admin/products"):(t.$bus.$emit("alert",e.data.message,"danger"),t.isLoading=!1)})},goBack:function(){var t=this;t.isLoading=!0,setTimeout(function(){t.$router.push("tours"),t.isLoading=!1},750)}},components:{Navbar:X}},et={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),t._v(" "),a("Navbar",{attrs:{navItemShowJudge:"register"}}),t._v(" "),a("div",{staticClass:"d-flex justify-content-center align-items-center\n  vw-100 vh-100 bg-image"},[t.isDeviceError?t._e():a("form",{staticClass:"form-signin bg-light shadow rounded pt-4 pb-2",on:{submit:function(e){return e.preventDefault(),t.signIn(e)}}},[a("h1",{staticClass:"h5 mb-3 font-weight-bold"},[t._v("後台登入介面")]),t._v(" "),a("label",{staticClass:"sr-only",attrs:{for:"inputEmail"}},[t._v("請輸入Email")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"form-control",attrs:{type:"email",id:"inputEmail",placeholder:"請輸入Email",required:"",autofocus:""},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}}),t._v(" "),a("label",{staticClass:"sr-only",attrs:{for:"inputPassword"}},[t._v("請輸入密碼")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:"請輸入密碼",required:""},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),t._v(" "),t._m(0),t._v(" "),a("button",{staticClass:"btn btn-lg btn-primary btn-block",attrs:{type:"submit"}},[t._v("登入")]),t._v(" "),a("a",{staticClass:" my-3 text-center nav-link p-0\n        font-weight-bold",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.goBack(e)}}},[t._v("返回行程一覽")]),t._v(" "),a("p",{staticClass:" text-muted text-center"},[t._v("伊森旅遊© 2019")])])]),t._v(" "),t.isDeviceError?a("div",{staticClass:"h3 text-center text-white text-bolder c-device-error p-3 rounded"},[t._m(1),t._v(" "),a("br"),t._v(" "),a("button",{staticClass:"btn text-dark bg-light mt-2 font-weight-bolder",on:{click:t.goBack}},[t._v("確定")])]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"checkbox mb-3"},[e("label",[e("input",{attrs:{type:"checkbox",value:"remember-me"}}),this._v(" 記住我\n          ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[this._v("\n      請使用電腦\n      "),e("br"),this._v("\n      操作後台!\n    ")])}]};var at=a("VU/8")(tt,et,!1,function(t){a("IzWn")},"data-v-29298332",null).exports,st={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"carousel slide",attrs:{id:"banner-carosel","data-ride":"carousel"}},[a("ol",{staticClass:"carousel-indicators"},[a("li",{staticClass:"active",attrs:{"data-target":"#banner-carosel","data-slide-to":"0"}}),t._v(" "),a("li",{attrs:{"data-target":"#banner-carosel","data-slide-to":"1"}}),t._v(" "),a("li",{attrs:{"data-target":"#banner-carosel","data-slide-to":"2"}})]),t._v(" "),a("div",{staticClass:"carousel-inner"},[a("div",{staticClass:"carousel-item c-carosel-01 c-carosel position-relative active"},[a("h4",{staticClass:"font-weight-bolder c-carosel-slogan"},[t._v("京都5天4夜")]),t._v(" "),a("p",{staticClass:"py-1 c-carosel-description"},[t._v("細細探索這座古都，NT$ 14,999 元起!")])]),t._v(" "),a("div",{staticClass:"carousel-item c-carosel-02 c-carosel position-relative"},[a("h4",{staticClass:"font-weight-bolder c-carosel-slogan"},[t._v("東京8天7夜")]),t._v(" "),a("p",{staticClass:"py-1 c-carosel-description"},[t._v("一探屬於你的東京之旅，NT$ 24,999 元起!")])]),t._v(" "),a("div",{staticClass:"carousel-item c-carosel-03 c-carosel position-relative"},[a("h4",{staticClass:"font-weight-bolder c-carosel-slogan"},[t._v("大阪10天9夜")]),t._v(" "),a("p",{staticClass:"py-1 c-carosel-description"},[t._v("慶祝伊森旅遊滿3周年，NT$ 19,999 元起!")])])]),t._v(" "),a("a",{staticClass:"carousel-control-prev",attrs:{href:"#banner-carosel",role:"button","data-slide":"prev"}},[a("span",{staticClass:"sr-only"},[t._v("Previous")])]),t._v(" "),a("a",{staticClass:"carousel-control-next",attrs:{href:"#banner-carosel",role:"button","data-slide":"next"}},[a("span",{staticClass:"sr-only"},[t._v("Next")])])])])}]};var it=a("VU/8")(null,st,!1,function(t){a("Naed")},"data-v-8af96ef4",null).exports,ot={data:function(){return{qty:0}},props:{productData:{type:Object,default:function(){return{}}},cartData:{type:Object,default:function(){return{}}}},methods:{emitAddToCart:function(t,e){this.$emit("emitAddToCart",t,e)}},watch:{cartData:function(){this.qty=0}}},rt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title h3 font-weight-bolder",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.productData.title))]),t._v(" "),t._m(0)]),t._v(" "),a("div",{staticClass:"modal-body"},[a("img",{staticClass:"img-fluid c-zoom-image",attrs:{src:t.productData.imageUrl,alt:t.productData.title}}),t._v(" "),a("blockquote",{staticClass:"blockquote my-4"},[a("p",{staticClass:"h6 mb-3 mx-2"},[t._v(t._s(t.productData.content))])]),t._v(" "),a("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[t.productData.price!==t.productData.origin_price?a("div",{staticClass:"ml-2"},[t._v("\n                原價：\n                "),a("span",{staticClass:"h3",class:{"c-text-through":t.productData.price,"c-text-small":t.productData.price}},[t._v("\n                    "+t._s(t._f("CurrencyFilter")(t.productData.origin_price))+"\n                ")]),t._v("\n                  元\n                "),a("small",{staticClass:"text-muted"},[t._v("\n                  ("+t._s(t.productData.unit)+")\n                ")])]):t._e(),t._v(" "),t.productData.price?a("div",{staticClass:"h6 mr-2",class:{"text-danger":t.productData.price!==t.productData.origin_price}},[t._v("\n                售價：\n                "),a("span",{staticClass:"h3"},[t._v("\n                    "+t._s(t._f("CurrencyFilter")(t.productData.price))+"\n                ")]),t._v("\n                元\n                "),a("span",[t._v("\n                    ("+t._s(t.productData.unit)+")\n                ")])]):t._e()]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.qty,expression:"qty"}],staticClass:"form-control mt-3",attrs:{name:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.qty=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"0",disabled:""}},[t._v("請選擇人數")]),t._v(" "),t._l(10,function(e){return a("option",{key:e,domProps:{value:e}},[t._v("一共 "+t._s(e)+" "+t._s(t.productData.unit)+"\n            ")])})],2)]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.emitAddToCart(t.productData.id,t.qty)}}},[t._v("\n            加到購物車\n          ")])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}]};var nt={data:function(){return{products:[],product:{},isLoading:!1,search:"",pages:{},searchData:{productCategory:"all",productContent:""},carts:{}}},methods:{getTours:function(){var t=this,e="https://vue-course-api.hexschool.io/api/eason1116/products?page="+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1);t.isLoading=!0,t.$http.get(e).then(function(e){t.products=e.data.products,t.isLoading=!1,t.pages=e.data.pagination})},getSingleProduct:function(t){var e=this,a="https://vue-course-api.hexschool.io/api/eason1116/product/"+t;e.$http.get(a).then(function(t){e.product=t.data.product,o()("#productModal").modal("show")})},addToCart:function(t){var e=this,a={product_id:t,qty:arguments.length>1&&void 0!==arguments[1]?arguments[1]:1};e.$http.post("https://vue-course-api.hexschool.io/api/eason1116/cart",{data:a}).then(function(t){t.data.success?(e.getCart(),o()("#productModal").modal("hide"),e.$bus.$emit("alert",t.data.message,"success")):(e.getCart(),o()("#productModal").modal("hide"),e.$bus.$emit("alert",t.data.message,"danger")),e.$refs.getCart.getCart()})},getCart:function(){var t=this;t.isLoading=!0,t.$http.get("https://vue-course-api.hexschool.io/api/eason1116/cart").then(function(e){t.carts=e.data.data,t.isLoading=!1})},recommend:function(t){this.searchData.productContent=t.title,this.searchData.productCategory=t.category},clearSearchInput:function(){this.searchData.productContent="",this.searchData.productCategory="all"}},created:function(){this.getTours(),this.getCart()},components:{Navbar:X,Carosel:it,SingleProductModal:a("VU/8")(ot,rt,!1,function(t){a("NiFv")},"data-v-0df7fbe4",null).exports,Pagination:A},computed:{categoryFilter:function(){var t=[];return this.products.forEach(function(e){return t.push(e.category)}),t.filter(function(t,e,a){return a.indexOf(t)===e})},productCategoryFilter:function(){var t=this;return"all"===t.searchData.productCategory?t.products:t.products.filter(function(e){return e.category===t.searchData.productCategory})},productContentFilter:function(){var t=this;return t.searchData.productContent?t.productCategoryFilter.filter(function(e){var a=e.title.toLowerCase().trim(),s=e.description.toLowerCase().trim(),i=t.searchData.productContent;return-1!==a.indexOf(i)||-1!==s.indexOf(i)}):t.productCategoryFilter}}},ct={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"bg-light"},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),t._v(" "),a("Navbar",{ref:"getCart",attrs:{navItemShowJudge:"tours"}}),t._v(" "),a("Carosel"),t._v(" "),a("div",{staticClass:"container my-2"},[a("form",{staticClass:"py-3 c-width mx-auto c-sticky-top",on:{submit:function(t){t.preventDefault()}}},[a("div",{staticClass:"input-group"},[a("div",{staticClass:"input-group-prepend"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.searchData.productCategory,expression:"searchData.productCategory"}],staticClass:"form-control rounded-left",attrs:{name:"CategorySelector",id:"CategorySelector"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.searchData,"productCategory",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"all",selected:""}},[t._v("所有")]),t._v(" "),t._l(t.categoryFilter,function(e,s){return a("option",{key:s,domProps:{value:e}},[t._v(t._s(e))])})],2)]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchData.productContent,expression:"searchData.productContent"}],staticClass:"form-control",attrs:{type:"text",placeholder:"想去哪裡?","aria-label":"Text input with dropdown button",id:"searchInput"},domProps:{value:t.searchData.productContent},on:{input:function(e){e.target.composing||t.$set(t.searchData,"productContent",e.target.value)}}}),t._v(" "),a("div",{staticClass:"input-group-append"},[a("a",{staticClass:"input-group-text c-text-decoration-none",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.clearSearchInput(e)}}},[t._v("×")])])]),t._v(" "),a("small",{staticClass:"c-hide"},[t._v("\n          熱門搜尋：\n          "),t._l(t.products.slice(0,4),function(e,s){return a("a",{key:s,attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.recommend(e)}}},[t._v("\n            "+t._s(e.title)+" \n          ")])})],2)]),t._v(" "),a("keep-alive",[a("div",[a("div",{staticClass:"card-columns"},t._l(t.productContentFilter,function(e,s){return a("div",{key:s,staticClass:"mb-4 c-card-bg",class:{card:e.is_enabled}},[e.is_enabled?a("img",{staticClass:"card-img-top",attrs:{src:e.imageUrl,alt:e.title}}):t._e(),t._v(" "),e.is_enabled?a("div",{staticClass:"card-body c-card-bg rounded-bottom"},[a("h5",{staticClass:"card-title font-weight-bold h4"},[t._v(t._s(e.title))]),t._v(" "),a("p",{staticClass:"card-text"},[t._v(t._s(e.description))]),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"w-100 d-inline-flex justify-content-between align-items-center"},[a("div",{staticClass:"ml-3"},[e.price!==e.origin_price?a("p",{staticClass:"c-m-0 text-muted"},[t._v("\n                      原價：\n                      "),a("span",{class:{"c-text-through":e.price,"c-text-small":e.price,h4:!e.price}},[t._v(t._s(t._f("CurrencyFilter")(e.origin_price)))])]):t._e(),t._v(" "),a("p",{class:{"text-danger":e.price!==e.origin_price}},[t._v("\n                      售價：\n                      "),a("span",{staticClass:"h4"},[t._v(t._s(t._f("CurrencyFilter")(e.price)))])])]),t._v(" "),a("div",{staticClass:"mr-3"},[a("button",{staticClass:"btn btn-outline-primary",on:{click:function(a){return t.getSingleProduct(e.id)}}},[t._v("詳細資訊")])])])]):t._e()])}),0)])]),t._v(" "),a("Pagination",{attrs:{pageData:t.pages},on:{emitGetPage:t.getTours}})],1),t._v(" "),a("SingleProductModal",{attrs:{productData:t.product,cartData:t.carts},on:{emitAddToCart:t.addToCart}}),t._v(" "),t._m(0)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("footer",[e("p",{staticClass:"text-center text-white m-0 py-3 d-block bg-dark"},[this._v("本網站資料所有資料皆來自網路，僅供學術用途。")])])}]};var lt=a("VU/8")(nt,ct,!1,function(t){a("TyEa")},"data-v-6d81e5ba",null).exports,dt={data:function(){return{order:{user:{}},orderId:"",carts:{},coupon_code:"",isLoading:"",step:1,form:{user:{}},cartLength:0}},methods:{getCart:function(){var t=this;t.isLoading=!0,t.$http.get("https://vue-course-api.hexschool.io/api/eason1116/cart").then(function(e){t.carts=e.data.data,t.cartLength=e.data.data.carts.length,t.isLoading=!1})},getOrder:function(){var t=this,e="https://vue-course-api.hexschool.io/api/eason1116/order/"+t.orderId;t.$http.get(e).then(function(e){t.order=e.data.order})},payOrder:function(){var t=this,e="https://vue-course-api.hexschool.io/api/eason1116/pay/"+t.orderId;t.$http.post(e).then(function(e){e.data.success&&t.getOrder()})},removeCartItem:function(t){var e=this,a="https://vue-course-api.hexschool.io/api/eason1116/cart/"+t;e.isLoading=!0,e.$http.delete(a).then(function(){e.getCart(),e.isLoading=!1,e.$bus.$emit("alert","刪除成功","danger")})},addCouponCode:function(){var t=this,e={code:t.coupon_code};t.isLoading=!0,t.$http.post("https://vue-course-api.hexschool.io/api/eason1116/coupon",{data:e}).then(function(){t.getCart(),t.isLoading=!1})},createOrder:function(){var t=this,e=t.form;t.isLoading=!0,this.$validator.validate().then(function(a){a?t.$http.post("https://vue-course-api.hexschool.io/api/eason1116/order",{data:e}).then(function(e){e.data.success&&(t.orderId=e.data.orderId,t.getOrder(),t.isLoading=!0,setTimeout(function(){t.step+=1,t.isLoading=!1},250))}):(t.$bus.$emit("alert","欄位不完整","danger"),setTimeout(function(){t.isLoading=!1},250))})},toTours:function(){var t=this;t.isLoading=!0,setTimeout(function(){window.location.href="./#/tours",t.isLoading=!1},750)},goPreStep:function(){var t=this,e=this;e.isLoading=!0,setTimeout(function(){t.step-=1,e.isLoading=!1},250)},goNextStep:function(){var t=this,e=this;e.isLoading=!0,setTimeout(function(){t.step+=1,e.isLoading=!1},250)}},created:function(){this.getCart()},components:{Navbar:X}},ut={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),t._v(" "),a("Navbar"),t._v(" "),a("div",{staticClass:"c-wrap-bg",class:{"d-flex align-items-center":0===t.cartLength}},[a("div",{staticClass:"container d-flex flex-column justify-content-center"},[0!==t.cartLength?a("ul",{staticClass:"list-group list-group-horizontal-lg justify-content-center my-3"},[a("li",{staticClass:"list-group-item text-center mx-1 py-4 rounded shadow c-step-width",class:{"bg-primary text-white c-mobile-width":1===t.step,"d-none d-lg-block":1!==t.step}},[a("span",{staticClass:"font-weight-bold h4"},[t._v("step01")]),t._v(" "),a("br"),t._v(" "),a("span",{staticClass:"font-weight-bold"},[t._v("確認購物清單")])]),t._v(" "),a("li",{staticClass:"list-group-item text-center mx-1 py-4 rounded shadow c-step-width",class:{"bg-primary text-white c-mobile-width":2===t.step,"d-none d-lg-block":2!==t.step}},[a("span",{staticClass:"font-weight-bold h4"},[t._v("step02")]),t._v(" "),a("br"),t._v(" "),a("span",{staticClass:"font-weight-bold"},[t._v("填寫訂購資料")])]),t._v(" "),a("li",{staticClass:"list-group-item text-center mx-1 py-4 rounded shadow c-step-width",class:{"bg-primary text-white c-mobile-width":3===t.step,"d-none d-lg-block":3!==t.step}},[a("span",{staticClass:"font-weight-bold h4"},[t._v("step03")]),t._v(" "),a("br"),t._v(" "),a("span",{staticClass:"font-weight-bold"},[t._v("付款&完成訂單")])])]):t._e(),t._v(" "),a("div",{staticClass:"container shadow pt-2 pb-3 bg-light rounded",class:{"c-table-width":1===t.step,"c-form-width":1!==t.step}},[0===t.cartLength?a("div",{staticClass:"d-flex flex-column align-items-center justify-content-center py-3"},[a("h5",{staticClass:"my-5"},[t._v("\n            您的目前購物車內沒有商品喔！\n          ")]),t._v(" "),a("button",{staticClass:"btn btn-secondary w-50 mb-3",attrs:{type:"button"},on:{click:t.toTours}},[t._v("\n            繼續選購\n          ")])]):a("div",[1===t.step?a("table",{staticClass:"table mt-5 table-responsive-lg c-mobile-text-size"},[t._m(0),t._v(" "),a("tbody",t._l(t.carts.carts,function(e,s){return a("tr",{key:s},[a("td",{staticClass:"align-middle"},[a("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(a){return t.removeCartItem(e.id)}}},[a("i",{staticClass:"far fa-trash-alt"})])]),t._v(" "),a("td",{staticClass:"align-middle"},[t._v("\n                  "+t._s(e.product.title)+"\n                  "),e.coupon?a("div",{staticClass:"text-success"},[t._v("已套用優惠券")]):t._e()]),t._v(" "),a("td",{staticClass:"align-middle"},[t._v(t._s(e.qty)+" / "+t._s(e.product.unit))]),t._v(" "),a("td",{staticClass:"align-middle text-right"},[t._v(t._s(t._f("CurrencyFilter")(e.final_total)))])])}),0),t._v(" "),a("tfoot",{staticClass:"font-weight-bold"},[a("tr",[a("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("總計")]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("CurrencyFilter")(t.carts.total)))])]),t._v(" "),t.carts.final_total!==t.carts.total?a("tr",[a("td",{staticClass:"text-right text-success",attrs:{colspan:"3"}},[t._v("折扣價")]),t._v(" "),a("td",{staticClass:"text-right text-success"},[t._v(t._s(t._f("CurrencyFilter")(t.carts.final_total)))])]):t._e()])]):t._e(),t._v(" "),2===t.step?a("form",{staticClass:"mx-auto",on:{submit:function(e){return e.preventDefault(),t.createOrder(e)}}},[a("div",{staticClass:"form-group mt-5"},[a("label",{attrs:{for:"useremail"}},[t._v("Email")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("email")},attrs:{type:"email",name:"email",id:"useremail",placeholder:"請輸入 Email"},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),t._v(" "),t.errors.first("email")?a("span",{staticClass:"text-danger"},[t._v("\n                "+t._s(t.errors.first("email"))+"\n              ")]):t._e()]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"username"}},[t._v("收件人姓名")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",name:"name",id:"username",placeholder:"輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}}),t._v(" "),t.errors.has("name")?a("span",{staticClass:"text-danger"},[t._v("姓名欄位不得留空")]):t._e()]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"usertel"}},[t._v("收件人電話")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("tel")},attrs:{type:"text",name:"tel",id:"usertel",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value)}}}),t._v(" "),t.errors.has("tel")?a("span",{staticClass:"text-danger"},[t._v("電話欄位不得留空")]):t._e()]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useraddress"}},[t._v("收件人地址")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("address")},attrs:{type:"text",name:"address",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value)}}}),t._v(" "),t.errors.has("address")?a("span",{staticClass:"text-danger"},[t._v("地址欄位不得留空")]):t._e()]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"comment"}},[t._v("留言")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"",id:"comment",cols:"30",rows:"10"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"d-flex justify-content-between"},[2===t.step?a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.goPreStep}},[t._v("返回上一步")]):t._e(),t._v(" "),2===t.step?a("button",{staticClass:"btn btn-danger"},[t._v("前往付款&完成訂單")]):t._e()])]):t._e(),t._v(" "),3===t.step?a("form",{staticClass:"c-mobile-text-size",on:{submit:function(e){return e.preventDefault(),t.payOrder(e)}}},[a("table",{staticClass:"table mt-5"},[t._m(1),t._v(" "),a("tbody",t._l(t.order.products,function(e){return a("tr",{key:e.id},[a("td",{staticClass:"align-middle"},[t._v(t._s(e.product.title))]),t._v(" "),a("td",{staticClass:"align-middle"},[t._v(t._s(e.qty)+"/"+t._s(e.product.unit))]),t._v(" "),a("td",{staticClass:"align-middle text-right"},[t._v(t._s(t._f("CurrencyFilter")(e.final_total)))])])}),0),t._v(" "),a("tfoot",[a("tr",{staticClass:"font-weight-bold"},[a("td",{staticClass:"text-right",attrs:{colspan:"2"}},[t._v("總計")]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("CurrencyFilter")(t.order.total)))])])])]),t._v(" "),a("table",{staticClass:"table"},[a("tbody",[a("tr",[a("th",[t._v("Email")]),t._v(" "),a("td",{staticClass:"text-right pr-3"},[t._v(t._s(t.order.user.email))])]),t._v(" "),a("tr",[a("th",[t._v("姓名")]),t._v(" "),a("td",{staticClass:"text-right pr-3"},[t._v(t._s(t.order.user.name))])]),t._v(" "),a("tr",[a("th",[t._v("收件人電話")]),t._v(" "),a("td",{staticClass:"text-right pr-3"},[t._v(t._s(t.order.user.tel))])]),t._v(" "),a("tr",[a("th",[t._v("收件人地址")]),t._v(" "),a("td",{staticClass:"text-right pr-3"},[t._v(t._s(t.order.user.address))])]),t._v(" "),a("tr",[a("th",[t._v("付款狀態")]),t._v(" "),a("td",{staticClass:"text-right pr-3"},[t.order.is_paid?a("span",{staticClass:"text-success"},[t._v("付款完成")]):a("span",{staticClass:"text-muted"},[t._v("尚未付款")])])])])]),t._v(" "),t.order.is_paid?a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-secondary",on:{click:t.toTours}},[t._v("繼續選購\n              ")])]):a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-danger"},[t._v("確認付款去")])])]):t._e(),t._v(" "),1===t.step?a("div",{staticClass:"input-group mb-3 input-group-sm"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.coupon_code},on:{input:function(e){e.target.composing||(t.coupon_code=e.target.value)}}}),t._v(" "),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.addCouponCode}},[t._v("套用優惠碼")])])]):t._e(),t._v(" "),a("div",{staticClass:"d-flex justify-content-between"},[1===t.step?a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.toTours}},[t._v("繼續選購")]):t._e(),t._v(" "),1===t.step?a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.goNextStep}},[t._v("下一步，前往結帳")]):t._e()])])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("th"),this._v(" "),e("th",[this._v("品名")]),this._v(" "),e("th",[this._v("數量")]),this._v(" "),e("th",{staticClass:"text-center"},[this._v("合計")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("th",[this._v("品名")]),this._v(" "),e("th",[this._v("數量")]),this._v(" "),e("th",[this._v("單價")])])}]};var pt=a("VU/8")(dt,ut,!1,function(t){a("VCwx")},"data-v-6f87635a",null).exports;s.a.use(x.a);var vt=new x.a({routes:[{path:"*",redirect:"/register"},{path:"/",name:"Index",component:Q},{path:"/tours",name:"Tours",component:lt},{path:"/checkout",name:"CheckOut",component:pt},{path:"/register",name:"Register",component:at},{path:"/admin",name:"Dashboard",component:k,meta:{requiresAuth:!0},children:[{path:"products",name:"Products",component:R,meta:{requiresAuth:!0}},{path:"orderlist",name:"OrderList",component:z,meta:{requiresAuth:!0}},{path:"coupon",name:"Coupon",component:B,meta:{requiresAuth:!0}}]}]});s.a.prototype.$bus=new s.a,s.a.use(l.a,n.a),s.a.use(u.a),s.a.config.productionTip=!1,n.a.defaults.withCredentials=!0,s.a.component("Loading",_.a),s.a.filter("CurrencyFilter",function(t){return"$"+Number(t).toFixed(0).replace(/./g,function(t,e,a){return e&&"."!==t&&(a.length-e)%3==0?(", "+t).replace(/\s/g,""):t})}),s.a.filter("DateFilter",function(t){return new Date(1e3*t).toLocaleDateString()});var mt=new u.a({locale:"zhTW"});s.a.use(d.a,{i18n:mt,dictionary:{zhTW:v.a}}),new s.a({i18n:mt,el:"#app",router:vt,components:{App:b},template:"<App/>"}),vt.beforeEach(function(t,e,a){t.meta.requiresAuth?n.a.post("https://vue-course-api.hexschool.io/api/user/check").then(function(t){t.data.success?a():a({path:"/login"})}):a()})},Naed:function(t,e){},NiFv:function(t,e){},O3Lm:function(t,e){},SYh3:function(t,e){},TyEa:function(t,e){},VAVp:function(t,e,a){t.exports=a.p+"static/media/bg-index.708974c.mp4"},VCwx:function(t,e){},bSfg:function(t,e){},"y/Rz":function(t,e){},yXcC:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.ea95edf678a246e551ab.js.map